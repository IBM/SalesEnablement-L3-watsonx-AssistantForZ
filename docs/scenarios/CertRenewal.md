# Scenario: Certificate renewal 
## Scenario overview
!!! Quote "Speaker's script"

    Now, change your role to that of a security administrator. You have just been informed that one of your SSL certificates signed by a Certificate Authority is expiring soon. Secure Sockets Layer (SSL) certificates, sometimes called digital certificates, are used to establish an encrypted connection between communicating parties over a network. Certificate management is crucial for maintaining the security of our company's z/OS environment, but it has been a while since you have performed this action. You recall there are many steps required on z/OS and various RACF commands that need to be run to renew a certificate. Rather than going to your senior security administrator for assistance, you leverage watsonx Assistant for Z to help automate the certificate renewal process. By automating these processes with Ansible, you ensure critical certificates are always up to date and reduce the risk of expired certificates disrupting your services.

!!! Warning "Responses from the virtual assistant are likely to change"

    Responses generated by {{offering.name}} are likely to change over time. The responses you see when you run the queries in this section may differ from the screen images captured in the {{guide.name}}. Using the exact queries specified will help assure a successful demonstration. Also, as updates to the environment are made, some confirmation dialogs may no longer be displayed as illustrated in the Example outputs.

<div style="page-break-after: always;"></div>

## Prerequisite steps
To run this scenario, a certificate must first be created. 

??? Tip "Copy and paste the prompt"

    Use the copy icon (![](_attachments/copyIcon.png)) to copy prompts from this demonstration guide and then paste the prompt using ++ctrl+v++, or right click and select ```Paste```.

Using the virtual assistant:

1. Create a certificate.
    
    **Prompt:**

    ```
    create a certificate
    ```
    **Example output:**

    ![](_attachments/cert-Setup001a.png)

<div style="page-break-after: always;"></div>
2. Complete the form for the (**a-f**) **z/OS Certs - Create Cert** skill and click (**g**) **Apply**.
  
    **Input values:**

    - (**a**) **Certificate Label**: <*Enter a unique label of your choice, for example "yourNameCert". Record the label as it is needed later.*>
    - (**b**) **CERT TYPE**: ```SITE```
    - (**c**) **Expiration date**: <*Enter an expiration date within the next 30 days in the format YYYY-MM-DD*>
    - (**d**) **Common name**: <*Enter a unique label of your choice, for example "company.com". Record the name as it is needed later. **Do NOT use test.com***>
    - (**e**) **SIGN WITH**: ```CERTAUTH```
    - (**f**) **SIGN LABEL**: ```TESTCA```   

    ![](_attachments/cert-Setup-1-a.png)

    **Example output:**
    
    ![](_attachments/cert-Setup-1-b.png)

The new certificate is created (despite the last message status of **pending**).

<div style="page-break-after: always;"></div>
## Prompts and Example outputs

1. Ask the assistant how to check on an expiring certificate and then click **Yes** to retrieve the certificate details.

    **Prompt:**

    ```
    I have a SSL certificate on z/OS expiring soon. How do I check when my certificate is going to expire?
    ```

    **Example output:**

    ![](_attachments/cert-001a.png)

<div style="page-break-after: always;"></div>

3. Enter the certificate label of the certificate created earlier.
 
    ![](_attachments/cert-001b.png)

4. Wait approximately 10 seconds and then click **Apply**.

    ![](_attachments/cert-001-c.png)

5. Review the certificate information and then click **Yes** to renew the certificate.

    ![](_attachments/cert-002a.png)

<div style="page-break-after: always;"></div>

6. Enter a new date for the certificate in the form of **YYYY-MM-DD**.
    
    ![](_attachments/cert-002b.png)
 
7. Wait approximately 1 minute and then click **Yes**.

    ![](_attachments/cert-002c.png)

8. Wait approximately 30 seconds and then click **Apply**.

    ![](_attachments/cert-002d.png)

9. Verify the certificate expiration date has changed to the value specified in step 6.

    ![](_attachments/cert-002e.png)

<div style="page-break-after: always;"></div>
## Cleanup steps
Following the demo, cleanup the system by deleting the original certificate created.

Using the virtual assistant:

1. Delete the certificate.
  
    **Prompt:**

    ```
    delete cert
    ```

    **Example output:**

    ![](_attachments/deleteCert01.png)
<div style="page-break-after: always;"></div>
2. Complete the form and click **Apply**.
 
    **Input values:**

    - **CERT LABEL**: <*Enter the original certificate label that you created.*>
    - **CERT TYPE**: ```SITE```

    ![](_attachments/deleteCert02.png)
